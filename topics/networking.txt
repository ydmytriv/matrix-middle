різниця між IPv4 і IPv6
	https://habrahabr.ru/post/210100/
	32 - 128 біт
	к-ть адрес ір4 4 294 967 296 - ір6 10в28степені (2 в 128 степені)
	новий формат заголовка (40 байт)і можуть бути додаткові заголовки(декілька) ір4(20-60байт),
	циклічна адреса 127.0.0.1    ::1
	MTU максимальний блок передачі в байтах 576-ір4 1280-ір6
	більше місця під адресу (128 біт)
	можуть автоматично конфігуруватись навіть без DHCP сервера для зв"язку з адресами, отриманими з проксі-сервеів (link-local adresses)
	підтримка встроїної безпеки IPSec 
	краща підтримка QoS
	новий протокол Neighbor Discovery protocol - заміняє ARP
	в ICMPv6 додано ряд нових артибутів для підтримки NDP (замість ARP) і MLD
	непотрібен NAT (перетворення мережевих адрес)
	Легко розширюється (заголовок обмежений тільки розміром пакета а в ір4=40 байт)
	в ipv6 немає броадкастної абреси і всі розсилки робляться мультикастами
	http://www.la-optic.narod.ru/ipv6.html
	https://www.ibm.com/support/knowledgecenter/ru/ssw_ibm_i_71/rzai2/rzai2compipv4ipv6.htm

класи ір4
	класи мережі:
	А 0.0.0.0   - 127.255.255.255  маска 255.0.0.0  перший біт 0  net.host.host.host
	B 128.0.0.0 - 191.255.255.255        255.255.0.0           10 net.net.host.host
	C 192.0.0.0 - 223.255.255.255        255.255.255.0         110 net.net.net.host
	D 224.0.0.0 - 239.255.255.255     адреси зарезервовані для багатоадресної розсилки
	E 240.0.0.0 - 255.255.255.255            зарезервовані

модель OSI:
	1. Фізичний рівень - метод передачі, середовище, метод кодування ...                                                                     |мережевого доступу|
	2. Канальний (Data Link Layer): адресація в межах локальної мережі, перевірка цілісності даних, МАС-адреса, протокол Ethernet, РРР, HDLC |мережевого доступу|  кадри
	3. мережевий рівень (network layer) - з"єднання ділянок мережі, маршрутизація, IPv4, IPv6, ICMP                                          |інтернет|пакети
	4. транспортний рівень (transport) - тут існують порти, протоколи TCP, UDP                                                   |транспортний|сегменти(tcp) датаграми(udp)
	5. Сеансовий (session) - встановлює, підтримує і розриває сеанс                                                          прикладний                  PDU
	6. Рівень представлення (presentation layer) - структурує інф. в читабельний вигляд для прикладного рівня                прикладний                PDU
	7. Прикладний (application layer) - email, ftp, http ...                                                                 прикладний   PDU (protocol data units) - дані

	інкапсуляція - зверху вниз
	деінкапсуляція - знизу вверх

стек TCP/IP:
	1. рівень мережевого доступу                фізичний + канальний                         mac
	2. інтернет                                 мережевий                                    ip
	3. транспортний                             транспортний                                 port (tcp, udp)
	4. прикладний                               сеансовий + представлення + прикладний       програма(браузер)
	
фаєрволи
https://www.youtube.com/watch?v=9r6z9qggSIc
	- закривають доступ на мережевому і транспортному рівні (по портах, ір, флагах(ACK ...) і таблиці встановлених з"єднань, типи протоколів)
	- на канальному рівні можна виконувати фільтрацію по мак-адресах
	- на прикланому рівні (фільтрація на proxy сервері - по адресах сайтів, фільтрація за контентом)
	- система виявлення вторгнень IDS
	- система попередження вторгнень IPS

ICMP - ротокол мережевого рівня OSI, його задача обслуговування ф-ції контроля правильності роботи мережі 
	типи ICMP:
	0 - echo reply
	3 - Destination Unreachable
	8 - Echo Request 
	13 - Timestamp - вимога часового шифра
	14 - Timestamp Reply
	30 - Traceroute
	37 - Domain Name Request
	38 - Domain Name Reply
	поле кода операції в заголовку визначає вид вмісту паката в залежності від його типу

ARP - Address Resolution Protocol - протокол перетворення адрес (who has)
	існує ARP таблиця, яка заповнюється по мірі необхідності, якщо в ній немає потрібної адреси, то шлеться широкосмуговий ARP-запит (who has ip ...), модуль ARP іншого компа отримує, звіряє з власним ip і якщо співпадає то шле відповідь де вписує свій mac, відпоідь зприсується в ARP таблицю
	існує атака ARP spoofing (за допомогою надсилання підробних ARP відповідей в компах мережі в ARP таблицях підмінюється мак адреса певного компа, тоді весь трафік буде ходити через зловмисника) - захист - статична таблиця ARP

DHCP - Dynamic Host Configuration Protocol - протокол динамічної конфігурації вузла
	67 - server
	68 - client
	принцип DORA:
		- клієнт шле широкосмуговий DHCPDISCOVER - шукає сервер
		- сервер шле клієнту широкосмуговий DHCPOFFER, який включає унікальний ір
		- клієнт шле широкосмуговий DHCPREQUEST з запитом видати вказаний ір
		- сервер шле широкосмуговий DHCPACK в якому підтверджує запит на ір і крвм того вказує інші деталі (шлюз, днс ...), якщо не може надати адресу, то шле DHCPNACK
	DHCPDECLINE  - якщо клієнт не бере запропонований ір (він вже використовується)
	DHCPRELEASE  - клієнт звільняє ір
	DHCPRENEW  - запит оновити і продовжити аренду ір
	DHCPINFORM  - запит розширеної інф. з сервера, наприклад знаходження іншого DHCP сервера в мережі
	режими роботи DHCP:
	- динамічний розподіл - видається ір за запитом на певний час оренди, потім або продовжується або ні
	- автоматичне виділння - майже те саме, але зберігається запис минулих завдань і намагається видавати одному компу ту саму адресу
	- статичний розподіл - ір призначаєтсья виключно на основі таблиць MAC адрес (заповнена вручну), якщо там немає мас, то ір не видається

TCP - Transmission Control Protocol - протокол керування передачею - з підтвердженням доставки
	SYN
	SYN, ACK
	ACK 
	при обміні даними контролюєтсья номер послідовності, для встановлення потрібного порядку, отримувач відправляє передавачу підтвердження отримання сегмента з певним номером послідовності
	закриття сесії
	FIN
	FIN,ACK

TCP dump
	tcpdump -i eth1 -vvn icmp or udp
	        |    опції  | фільтр   |
	-i  - інтерфейс
	-v, -vv, -vvv: багатослівність виводу
	-q: тихий режим
	-e - друкувати заголовки кадрів канального рівня
	-N - дозволяти доменні імена хостів
	-n - не дозволяти доменні імена хостів
	-t - не друкувати часові мітки
	-s0 - максимальний захват (пакет повністю) - в останніх версіях за замовчуванням

	-w - запис в файл (потім можна читати вайршарком або іншим tcpdump)
	-r - читати з файла
	фільтри:
	    tcp

    port 25 and not host 10.0.0.3

    icmp or arp or udp

    vlan 3 and ether src host aa:bb:cc:dd:ee:ff

    arp or udp port 53

    icmp and \(dst host mrorange or dst host mrbrown\) 
	
адресовий простір - розділяє адреси на білі(public) і приватні(private) (безкласова адресація)
діапазони адрес під приватні мережі:
	10.0.0.0 — 10.255.255.255	(10/8)
	172.16.0.0 — 172.31.255.255 (172.16/12)
	192.168.0.0 — 192.168.255.255 (192.168/16)
зарезервовані адреси:
	0.0.0.0/8 - використовуються хостами для самоідентифікації(при звертанні до DHCP сервера хост ставить таку адресу як свою)
	127.0.0.0/8 — loopback або localhost
	169.254.0.0/16 — link-local address використовуються при недоступності DHCP, не маршрутизуються, з них не вийдеш в нет
	224.0.0.0/4 - під багатоадресну розсилку і мультикаст
	
unicast - одноцільова передача пакетів (трафік від джерела до конкретного ІР-призначення)
broadcast - (передача всім) використовується спеціальна адреса (255 як правило) щоб послати потік всім абонентам даної мережі
multicast - (групова передача пакетів) передається один потік багатьом адресам призначення - часто викор. для передачі потокового відео (IPTV), 
		     викор. спеціальний клас IP-адрес, це можуть бути адреси класа D (FF в ір6) для пошуку хостів, яким доставляти багатоцільові розсилки виеор. протоколи:IGMP -v4 MLD -v6
		різниця між multicast і broadcast - при мультикаст абонент вибирає приймати чи ні
		маршрутизатори викор. протокол IGMP для відслідковування стану груп розсилки

QoS - quality of service - технологія надання різним класам трафіка різних пріорітетів в обслуговуванні (надаються переваги пріорітентому трафіку, пристрою...)
	йомвірність проходження пакета між двома точками мережі 
	2 архітектури QoS
	IntServ - ітегроване обслуговування
		Забезпечує наскрізну End-to-end якість обслуговування - резервування ресурсів на всьому шляху проходження трафіка. Для резервування ресурсів викор. 
		протокол RSVP. Недолік - резервуєтсья завжди, навіть коли не використовується
	DiffServ - диференційні послуги
		Набір засобів класифікації і механізмів організації черг, функції:
		- Формування трафіка на границях мережі
		- Політика покрокового обслуговування - розподілення ресурсів і відкидання пакетів
	в основному пріорітизація здійснюжться на рівні L2 (канальний) з ethernet-кадрами
	типи трафіка (з найвищого):
		7. керування мережею (кадри маршрутних протоколів)
		6. Голос
		5. Відео
		4. Контрольоване навантаження (некритичні затримки але критичні втрати)
		3. Максимальні зусилля (критичні втрати але менший пріорітет ніж 4)
		2. Найкращі зусилля (звичайний трафік LAN)
		1. Фоновий режим (Масові пересилки даних і нші активності, які не впливають на інших)
	якщо черг немає то черги не працюють
	На L3 (IP) використовується поле ToS (type of service)